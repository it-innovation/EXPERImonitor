<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    
    <modelVersion>4.0.0</modelVersion>
    <groupId>uk.ac.soton.itinnovation.experimedia</groupId>
    <artifactId>experimedia-arch-ecc</artifactId>
    <version>1.1-SNAPSHOT</version> 
    <name>Experiment Content Component</name> 
    <packaging>pom</packaging>
    
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <ecc.licenseplugin.version>1.4</ecc.licenseplugin.version>
        <ecc.projectInfo.version>2.6</ecc.projectInfo.version>
        <ecc.java.version>1.6</ecc.java.version>
        <ecc.javadocplugin.version>2.9</ecc.javadocplugin.version>
        <ecc.javadocpath>doc/javaDoc</ecc.javadocpath>
        <ecc.reportplugin.version>2.6</ecc.reportplugin.version>
        <ecc.resourceplugin.version>2.5</ecc.resourceplugin.version>
        <ecc.assemblyplugin.version>2.4</ecc.assemblyplugin.version>
        <ecc.assemblypath>assembly</ecc.assemblypath>
        <ecc.junit.version>4.10</ecc.junit.version>
        <ecc.log4j.version>1.2.17</ecc.log4j.version>
        <ecc.gson.version>2.2.2</ecc.gson.version>
        <ecc.surefire.version>2.12.4</ecc.surefire.version>
    </properties>
    
    <!-- EXPERIMEDIA license agreement _____________________________________ -->
    <licenses>
      <license>
        <name>IT Innovation EXPERIMEDIA Licence</name>
        <url>file://ITInnov-EXPERIMEDIA-licence-v1.0.txt</url>
        <distribution>JRS SVN</distribution>
      </license>
    </licenses>
  
    <build>
        <pluginManagement>
          <plugins>
            
            <!-- Licensing (for packaging) _________________________________ -->
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>license-maven-plugin</artifactId>
              <version>${ecc.licenseplugin.version}</version>
              <executions>
                <execution>
                    <id>third-party-report</id>
                    <phase>package</phase>
                    <goals>
                      <goal>aggregate-add-third-party</goal>
                    </goals>
                    <configuration>
                      <useMissingFile>true</useMissingFile>
                    </configuration>
                </execution>
                
                <execution>
                  <id>update-project-license</id>
                  <phase>package</phase>
                  <goals>
                    <goal>update-project-license</goal>
                  </goals>
                  
                  <configuration>
                    <licenseName>experimedia_licence</licenseName>
                    <licenseResolver>${project.baseUri}/lic</licenseResolver>
                  </configuration>
                  
                </execution>
              </executions>
            </plugin>
            
            <!-- Compiler configuration ____________________________________ -->
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-compiler-plugin</artifactId>
              <version>3.0</version>
              <configuration>
                <source>${ecc.java.version}</source>
                <target>${ecc.java.version}</target>
                <encoding>${project.build.sourceEncoding}</encoding>
              </configuration>
            </plugin>
              
            <!-- Packaging configuration ___________________________________ -->
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-assembly-plugin</artifactId>
              <version>${ecc.assemblyplugin.version}</version>
              <configuration>
                <descriptors>
                  <descriptor>${ecc.assemblypath}/eccSourceAssembly.xml</descriptor>
                </descriptors>
              </configuration>
            </plugin>
            
          </plugins>
        </pluginManagement>
               
        <plugins>
            <!-- Plug-in to build the project with UTF-8 encoding __________ -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>${ecc.resourceplugin.version}</version>
                <configuration>
                  <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
            
            <!-- SITE report generation ____________________________________ -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                  
                    <reportPlugins>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-project-info-reports-plugin</artifactId>
                            <version>${ecc.reportplugin.version}</version>
                        </plugin>
                        
                        <!-- Check code conformance ________________________ -->
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-checkstyle-plugin</artifactId>
                            <version>2.9.1</version>
                            <configuration>
                                <configLocation>checkstyle/checkstyle.xml</configLocation>
                                <headerLocation>checkstyle/regexp.header</headerLocation>
                            </configuration>
                        </plugin>
                        
                        <!-- JavaDoc generation ____________________________ -->
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-javadoc-plugin</artifactId>
                            <version>${ecc.javadocplugin.version}</version>
                            <reportOutputDirectory>${ecc.javadocpath}</reportOutputDirectory>
                            <destDir>.</destDir>
                        </plugin>
                        
                        <!-- Source cross-referencing documentation ________ -->
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-jxr-plugin</artifactId>
                            <version>2.3</version>
                            <configuration>
                                <aggregate>true</aggregate>
                            </configuration>
                        </plugin>
                        
                        <!-- Test results documentation ____________________ -->
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-surefire-report-plugin</artifactId>
                            <version>2.12.3</version>
                        </plugin>
                        
                        <!-- Test coverage documentation ___________________ -->
                        <plugin>
                            <groupId>org.codehaus.mojo</groupId>
                            <artifactId>cobertura-maven-plugin</artifactId>
                            <version>2.5.1</version>
                            <configuration>
                                <formats>
                                    <format>xml</format>
                                    <format>html</format>
                                </formats>
                            </configuration>
                        </plugin>
   
                    </reportPlugins>
                    
                </configuration>
            </plugin>
        </plugins>
          
    </build>
    
    <profiles>
      
      <profile>
        <id>packageECC</id>
        <build>
          
          <plugins>
            <!-- Plug-in to build the project with UTF-8 encoding __________ -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>${ecc.resourceplugin.version}</version>
                <configuration>
                  <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
            
            <!-- Check style _______________________________________________ -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.9.1</version>
                <dependencies>
                    <dependency>
                        <groupId>uk.ac.soton.itinnovation.experimedia</groupId>
                        <artifactId>build-tools</artifactId>
                        <version>1.1-SNAPSHOT</version>
                    </dependency>
                </dependencies>
            </plugin>
            
            <!-- Licensing _________________________________________________ -->
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>license-maven-plugin</artifactId>
            </plugin>
           
            <!-- Package JavaDoc ___________________________________________ -->
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-javadoc-plugin</artifactId>
              <version>${ecc.javadocplugin.version}</version>
              <executions>
                <execution>
                  <id>attach-javadocs</id>
                  <phase>package</phase>
                  <goals>
                    <goal>aggregate</goal>
                  </goals>
                  
                  <configuration>
                    <reportOutputDirectory>${ecc.javadocpath}</reportOutputDirectory>
                    <destDir>.</destDir>
                  </configuration>
                  
                </execution>
              </executions>
            </plugin>
            
            <!-- Package content ___________________________________________ -->
            <plugin>
              <artifactId>maven-assembly-plugin</artifactId>
              <version>${ecc.assemblyplugin.version}</version>
              <configuration>
                <descriptors>
                  <descriptor>${ecc.assemblypath}/eccSourceAssembly.xml</descriptor>
                </descriptors>
              </configuration>
              
              <executions>
                <execution>
                  <id>make-assembly</id>
                  <phase>package</phase>
                  <goals>
                    <goal>single</goal>
                  </goals>
                </execution>
              </executions>
            </plugin>
          
          </plugins>
          
        </build>        
      </profile>
      
    </profiles>

  <!-- 3rd party repositories _____________________________________________  -->
  <repositories>

  </repositories>

  <!-- Modules _____________________________________________________________ -->
  <modules>
      <module>common</module>
      <module>amqpAPI</module>
      <module>em</module>
      <module>edm</module>
      <module>samples</module>
      <module>build-tools</module>
      <module>eccDash</module>
  </modules>
    
</project>
